<%- include('partials/head') %>

<body>
    <div class="screen-overlay"></div>
    <%- include('partials/aside') %>
    <main class="main-wrap">
        <%- include('partials/header') %> 
        <section class="content-main">
            <div class="content-header">
                <div>
                    <h2 class="content-title card-title">Categories </h2>
                    <p>Add, edit or delete a category</p>
                </div>
                <!-- 6 -->
            </div>
            <% if (typeof(errors) !== 'undefined' && errors.length > 0) { %>
                <div id="error-message" style="background-color: rgba(255, 23, 23, 0.215); border-radius: 10px;">
                    <span>
                        <% errors.forEach(error => { %>
                            <p style="color: red;"><%= error %></p>
                        <% }); %>
                    </span>
                </div>
            <% } %>
            <div class="card">
                <div class="card-body">
                    <div class="row">
                    
                        <div class="col">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                           
                                            <th>Category Name</th>
                                            <th>Description</th>
                                            <th>Date</th>
                                            <th>Discount</th>
                                          <th>Offer</th>
                                            <th>Status</th>
                                            <th>Action</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% category.forEach((item,index) => { %>
                                            <tr>
                                              <td><%= item.categoryName %></td>
                                              <td><%= item.description %></td>
                                           <% if(item.offerDate !== undefined && item.offerDate !== null){ %>
      <td><%= item.offerDate.toString().slice(0,16) %></td>
    <% } else { %>
      <td>no info!</td>
    <% } %>
                                              <td><%= item.discount  %></td>
                                           
                                              <td><input type='number' onkeypress="return onlyNumberKey(event)" name="categoryDiscount" id="categoryDiscount<%= index  %>"></td>
                                              <td>
                                                <% if (item.published === true) { %>
                                                  <span>Listed</span>
                                                <% } else { %>
                                                  <span>Unlisted</span>
                                                <% } %>
                                              </td>
                                              <td>
                                                  <% if (item.published === true) { %>
                                                           <button class="btn btn-primary" id="" onclick="categoryDiscount('<%= item._id %>','<%= index %>')">SAVE</button>
                                                          <% } else { %>
                                                         <span>You cannot perform any action</span>
                                                          <% } %>
                                              </td>
                                              
                                            </tr>
                                          <% }); %>
                                        </tbody>
                                           
                                </table>
                            </div>
                        </div> <!-- .col// -->
                    </div> <!-- .row // -->
                </div> <!-- card body .// -->
            </div> <!-- card .// -->
        </section> <!-- content-main end// -->


 
    <script src="/admin/helpers/categoryOffers.js">
        

        </script>
         <%- include('partials/script') %>
</body>


</html>